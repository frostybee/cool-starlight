---
// SlideViewer.astro - A component that provides slide presentation functionality
import '../styles/slideviewer.css';
---

<div id="slide-viewer-trigger">
  <button id="start-slideshow" class="fb-slide__button">
    üìΩÔ∏è View as Slides
  </button>
</div>

<div id="slide-viewer-modal" class="fb-slide__modal hidden">
  <div class="fb-slide__container">
    <div class="fb-slide__toc-sidebar" id="slide-toc-sidebar">
      <div class="fb-slide__toc-header">
        <h3>Table of Contents</h3>
        <button id="toggle-toc" class="fb-slide__toc-toggle-btn" aria-label="Toggle table of contents">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M19 12H5m0 0l7 7m-7-7l7-7"/>
          </svg>
        </button>
      </div>
      <div class="fb-slide__search-container">
        <input
          type="text"
          id="slide-search-input"
          class="fb-slide__search-input"
          placeholder="Search slides..."
          aria-label="Search slides"
        />
        <button id="clear-search" class="fb-slide__clear-search-btn" aria-label="Clear search">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M18 6L6 18M6 6l12 12"/>
          </svg>
        </button>
      </div>
      <div class="fb-slide__toc-content" id="slide-toc-content">
        <!-- TOC items will be inserted here -->
      </div>
    </div>

    <div class="fb-slide__main-area">
      <div class="fb-slide__content-wrapper">
        <div id="slide-content" class="fb-slide__content">
          <!-- Slides will be inserted here -->
        </div>
        <div id="slide-number-indicator" class="fb-slide__number-indicator">
          1
        </div>
      </div>

      <div class="fb-slide__navigation">
        <!-- Desktop layout - all buttons visible -->
        <div class="fb-slide__nav-desktop">
          <button id="prev-slide" class="fb-slide__nav-btn" aria-label="Previous slide">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M19 12H5m0 0l7 7m-7-7l7-7"/>
            </svg>
            Previous
          </button>
          <div class="fb-slide__counter" id="slide-counter" title="Click to go to Slide:">
            <input type="number" id="slide-input" class="fb-slide__input" min="1" max="999" value="1" readonly />
            <span class="slide-separator"> / </span>
            <span id="total-slides">1</span>
          </div>
          <div class="fb-slide__font-adjuster">
            <button id="slide-decrease-font" class="fb-slide__font-adj-btn" aria-label="Decrease font size" title="Decrease font size">A-</button>
            <button id="slide-reset-font" class="fb-slide__font-adj-btn" aria-label="Reset font size" title="Reset font size">A</button>
            <button id="slide-increase-font" class="fb-slide__font-adj-btn" aria-label="Increase font size" title="Increase font size">A+</button>
          </div>
          <button id="show-thumbnails" class="fb-slide__nav-btn thumbnails-btn" aria-label="Show thumbnails grid" title="Show slide overview with thumbnails">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <rect x="3" y="3" width="7" height="7"/>
              <rect x="14" y="3" width="7" height="7"/>
              <rect x="3" y="14" width="7" height="7"/>
              <rect x="14" y="14" width="7" height="7"/>
            </svg>
            üìã Overview
          </button>
          <button id="toggle-reading-mode" class="fb-slide__nav-btn reading-mode-btn" aria-label="Toggle reading mode" title="Switch between slide mode and reading mode">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/>
              <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/>
            </svg>
            üìñ Reading Mode
          </button>
          <button id="toggle-fullscreen" class="fb-slide__nav-btn fullscreen-btn" aria-label="Toggle fullscreen">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"/>
            </svg>
          </button>
          <button id="close-slideshow" class="fb-slide__nav-btn fb-slide__close-btn" aria-label="Close slideshow">
            ‚úï
          </button>
          <button id="next-slide" class="fb-slide__nav-btn" aria-label="Next slide">
            Next
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M5 12h14m0 0l-7-7m7 7l-7 7"/>
            </svg>
          </button>
        </div>

        <!-- Mobile layout - compact with dropdown -->
        <div class="fb-slide__nav-mobile">
          <button id="prev-slide-mobile" class="fb-slide__nav-btn fb-slide__nav-mobile-btn" aria-label="Previous slide">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M19 12H5m0 0l7 7m-7-7l7-7"/>
            </svg>
          </button>
          
          <div class="fb-slide__counter fb-slide__counter-mobile" id="slide-counter-mobile" title="Click to go to Slide:">
            <input type="number" id="slide-input-mobile" class="fb-slide__input" min="1" max="999" value="1" readonly />
            <span class="slide-separator"> / </span>
            <span id="total-slides-mobile">1</span>
          </div>

          <div class="fb-slide__mobile-dropdown-container">
            <button id="mobile-menu-toggle" class="fb-slide__nav-btn fb-slide__mobile-menu-btn" aria-label="Open menu" title="More options">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="1"/>
                <circle cx="12" cy="5" r="1"/>
                <circle cx="12" cy="19" r="1"/>
              </svg>
            </button>
            
            <div id="mobile-dropdown-menu" class="fb-slide__mobile-dropdown hidden">
              <button id="slide-decrease-font-mobile" class="fb-slide__dropdown-item" aria-label="Decrease font size">
                <span class="fb-slide__dropdown-icon">A-</span>
                <span class="fb-slide__dropdown-text">Smaller Font</span>
              </button>
              <button id="slide-reset-font-mobile" class="fb-slide__dropdown-item" aria-label="Reset font size">
                <span class="fb-slide__dropdown-icon">A</span>
                <span class="fb-slide__dropdown-text">Reset Font</span>
              </button>
              <button id="slide-increase-font-mobile" class="fb-slide__dropdown-item" aria-label="Increase font size">
                <span class="fb-slide__dropdown-icon">A+</span>
                <span class="fb-slide__dropdown-text">Larger Font</span>
              </button>
              <button id="show-thumbnails-mobile" class="fb-slide__dropdown-item" aria-label="Show thumbnails grid">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <rect x="3" y="3" width="7" height="7"/>
                  <rect x="14" y="3" width="7" height="7"/>
                  <rect x="3" y="14" width="7" height="7"/>
                  <rect x="14" y="14" width="7" height="7"/>
                </svg>
                <span class="fb-slide__dropdown-text">Overview</span>
              </button>
              <button id="toggle-reading-mode-mobile" class="fb-slide__dropdown-item" aria-label="Toggle reading mode">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/>
                  <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/>
                </svg>
                <span class="fb-slide__dropdown-text">Reading Mode</span>
              </button>
              <button id="close-slideshow-mobile" class="fb-slide__dropdown-item" aria-label="Close slideshow">
                <span class="fb-slide__dropdown-icon">‚úï</span>
                <span class="fb-slide__dropdown-text">Close</span>
              </button>
            </div>
          </div>

          <button id="next-slide-mobile" class="fb-slide__nav-btn fb-slide__nav-mobile-btn" aria-label="Next slide">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M5 12h14m0 0l-7-7m7 7l-7 7"/>
            </svg>
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Go to slide modal -->
  <div id="goto-slide-modal" class="fb-slide__goto-modal hidden">
    <div class="fb-slide__goto-modal-content">
      <h3>Go to Slide:</h3>
      <input type="number" id="goto-slide-input" class="fb-slide__goto-input" min="1" max="1" placeholder="Enter slide number" />
      <div class="fb-slide__goto-buttons">
        <button id="goto-confirm" class="fb-slide__goto-btn fb-slide__goto-confirm">Go</button>
        <button id="goto-cancel" class="fb-slide__goto-btn fb-slide__goto-cancel">Cancel</button>
      </div>
    </div>
  </div>
</div>

<script src="/src/scripts/SlideViewer.js"></script>