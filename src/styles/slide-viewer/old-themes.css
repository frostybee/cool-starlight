/* SlideViewer Theme Styles */

@layer fb-slider-overrides {
  /* Root Theme Variables - Light Theme Defaults */
  :root {
    /* Core Slide Theme Variables - Light Theme Defaults */
    --slide-color-light-text: #1f2937;
    --slide-color-light-heading: #111827;
    --slide-color-light-bg: #ffffff;
    --slide-color-light-bg-nav: #f8fafc;
    --slide-color-light-bg-sidebar: #f1f5f9;
    --slide-color-light-border: #e2e8f0;
    --slide-color-light-accent: #3b82f6;
    --slide-color-light-accent-text: #ffffff;
    
    /* Core Slide Theme Variables - Dark Theme */
    --slide-color-dark-text: #ffffff;
    --slide-color-dark-heading: #ffffff;
    --slide-color-dark-bg: #0f172a;
    --slide-color-dark-bg-nav: #1e293b;
    --slide-color-dark-bg-sidebar: #334155;
    --slide-color-dark-border: #374151;
    --slide-color-dark-accent: #3b82f6;
    --slide-color-dark-accent-text: #ffffff;

    /* Current Active Theme Variables - Default to Light */
    --slide-text: var(--slide-color-light-text);
    --slide-heading: var(--slide-color-light-heading);
    --slide-bg: var(--slide-color-light-bg);
    --slide-bg-nav: var(--slide-color-light-bg-nav);
    --slide-border: var(--slide-color-light-border);
    --slide-accent: var(--slide-color-light-accent);
    --slide-accent-text: var(--slide-color-light-accent-text);

    /* TOC Color Variables for Light Theme */
    --fb-slide-toc-bg: var(--slide-color-light-bg-nav);
    --fb-slide-toc-border: var(--slide-color-light-border);
    --fb-slide-toc-text: var(--slide-color-light-text);
    --fb-slide-toc-hover-bg: #e0f2fe;
    --fb-slide-toc-hover-border: #3b82f6;
    --fb-slide-toc-hover-shadow: rgba(59, 130, 246, 0.2);
    --fb-slide-toc-active-bg: #fbbf24;
    --fb-slide-toc-active-text: #1f2937;
    --fb-slide-toc-active-border: #f59e0b;
    --fb-slide-toc-active-shadow: rgba(251, 191, 36, 0.4);
    --fb-slide-toc-number-bg: #3b82f6;
    --fb-slide-toc-number-text: #ffffff;
    --fb-slide-toc-number-shadow: rgba(99, 102, 241, 0.3);

    /* Progress Bar Colors for Light Theme */
    --fb-slide-progress-bg: #e2e8f0;
    --fb-slide-progress-fill: #facc15;
    --fb-slide-progress-shadow: rgba(250, 204, 21, 0.4);

    /* Search Highlight Colors for Light Theme */
    --fb-slide__search-highlight-bg: linear-gradient(90deg, #d1fae5, #a7f3d0);
    --fb-slide__search-highlight-text: #065f46;
    --fb-slide__search-highlight-border: #10b981;
    --fb-slide__search-highlight-shadow: rgba(16, 185, 129, 0.3);
    --fb-slide__search-match-bg: linear-gradient(135deg, #ecfdf5, #d1fae5);
    --fb-slide__search-match-border: #059669;
    --fb-slide__search-match-shadow: rgba(5, 150, 105, 0.2);

    /* UI Colors for Light Theme */
    --fb-slide-bg: #ffffff;
    --fb-slide-bg-nav: #f8fafc;
    --fb-slide-bg-sidebar: #f1f5f9;
    --fb-slide-gray-1: #f8fafc;
    --fb-slide-gray-2: #64748b;
    --fb-slide-gray-3: #475569;
    --fb-slide-gray-4: #334155;
    --fb-slide-gray-5: #1e293b;
    --fb-slide-gray-6: #0f172a;
    --fb-slide-accent: #3b82f6;
    --fb-slide-accent-text: #ffffff;
    --fb-slide-accent-high: #2563eb;
    --fb-slide-accent-low: rgba(59, 130, 246, 0.1);

    /* Compact button colors for Light Theme */
    --fb-compact-btn-bg: #e2e8f0;
    --fb-compact-btn-bg-hover: #cbd5e1;

    /* Slide Number Indicator */
    --fb-slide-number-bg: #1e3a8a;
    --fb-slide-number-text: white;
    --fb-slide-number-shadow: rgba(30, 58, 138, 0.4);
    --fb-slide-number-shadow-hover: rgba(30, 58, 138, 0.6);
    --fb-slide-number-border: rgba(255, 255, 255, 0.3);

    /* Thumbnail Badge */
    --fb-slide-thumbnail-badge-bg: #8cdff2;
    --fb-slide-thumbnail-badge-text: #000000;
    --fb-slide-thumbnail-badge-shadow: rgba(0, 0, 0, 0.2);

    /* Navigation Button Colors */
    --fb-slide-prev-btn-bg: #ef4444;
    --fb-slide-prev-btn-bg-hover: #dc2626;
    --fb-slide-next-btn-bg: rgb(8, 64, 160);
    --fb-slide-next-btn-bg-hover: rgb(179, 151, 10);
    --fb-slide-close-btn-bg: #dc2626;
    --fb-slide-close-btn-bg-hover: #b91c1c;
    --fb-slide-fullscreen-btn-bg: #16a34a;
    --fb-slide-fullscreen-btn-bg-hover: #15803d;
    --fb-slide-btn-text: white;

    /* Quote Colors */
    --fb-slide-quote-accent: #fbbf24;

    /* Error Colors */
    --fb-slide-error-bg: #ef4444;
    --fb-slide-error-text: white;

    /* Laser Pointer */
    --fb-slide-laser-indicator-bg: rgba(255, 107, 53, 0.9);
    --fb-slide-laser-indicator-text: white;

    /* Bookmark Colors for Light Theme */
    --fb-slide-bookmark-btn-bg: rgba(0, 0, 0, 0.6);
    --fb-slide-bookmark-btn-bg-hover: rgba(0, 0, 0, 0.8);
    --fb-slide-bookmark-btn-border: rgba(255, 255, 255, 0.2);
    --fb-slide-bookmark-btn-border-hover: #3b82f6;
    --fb-slide-bookmark-btn-text: rgba(255, 255, 255, 0.8);
    --fb-slide-bookmark-btn-text-hover: #3b82f6;
    --fb-slide-bookmark-btn-bookmarked-bg: #3b82f6;
    --fb-slide-bookmark-btn-bookmarked-bg-hover: #2563eb;
    --fb-slide-bookmark-btn-bookmarked-text: #ffffff;
    --fb-slide-bookmark-toggle-bg: transparent;
    --fb-slide-bookmark-toggle-bg-hover: rgba(255, 255, 255, 0.1);
    --fb-slide-bookmark-toggle-border: rgba(255, 255, 255, 0.2);
    --fb-slide-bookmark-toggle-border-hover: #3b82f6;
    --fb-slide-bookmark-toggle-text: rgba(255, 255, 255, 0.8);
    --fb-slide-bookmark-toggle-text-hover: #3b82f6;
    --fb-slide-bookmark-count-bg: #3b82f6;
    --fb-slide-bookmark-count-text: #ffffff;
    --fb-slide-bookmark-panel-bg: #ffffff;
    --fb-slide-bookmark-panel-border: #e2e8f0;
    --fb-slide-bookmark-panel-shadow: rgba(0, 0, 0, 0.3);
    --fb-slide-bookmark-header-bg: #f8fafc;
    --fb-slide-bookmark-header-text: #1f2937;
    --fb-slide-bookmark-item-bg: #f1f5f9;
    --fb-slide-bookmark-item-bg-hover: #f8fafc;
    --fb-slide-bookmark-item-border: #e2e8f0;
    --fb-slide-bookmark-item-border-hover: #3b82f6;
    --fb-slide-bookmark-item-text: #64748b;
    --fb-slide-bookmark-number-text: #3b82f6;
    --fb-slide-bookmark-remove-bg-hover: #fef2f2;
    --fb-slide-bookmark-remove-text-hover: #dc2626;

    /* Text Colors for Light Theme (default) */
    --fb-slide-text-color: var(--slide-color-light-text);
    --fb-slide-heading-color: var(--slide-color-light-heading);
  }

  /* =============================================================================
     INDEPENDENT DARK THEME - COMPLETELY INDEPENDENT FROM STARLIGHT
     ============================================================================= */

  .fb-slide__theme-independent-dark,
  #slide-viewer-modal.fb-slide__theme-independent-dark,
  .fb-slide__theme-independent-dark .fb-slide__container,
  #slide-viewer-modal.fb-slide__theme-independent-dark .fb-slide__container {
    /* Text and heading colors */
    --fb-slide-text-color: var(--slide-color-dark-text);
    --fb-slide-heading-color: var(--slide-color-dark-heading);

    /* TOC colors */
    --fb-slide-toc-bg: var(--slide-color-dark-bg-nav);
    --fb-slide-toc-border: var(--slide-color-dark-border);
    --fb-slide-toc-text: var(--slide-color-dark-text);
    --fb-slide-toc-hover-bg: #334155;
    --fb-slide-toc-hover-border: var(--slide-color-dark-accent);
    --fb-slide-toc-hover-shadow: rgba(59, 130, 246, 0.3);
    --fb-slide-toc-active-bg: #fbbf24;
    --fb-slide-toc-active-text: #1f2937;
    --fb-slide-toc-active-border: #f59e0b;
    --fb-slide-toc-active-shadow: rgba(251, 191, 36, 0.4);
    --fb-slide-toc-number-bg: var(--slide-color-dark-accent);
    --fb-slide-toc-number-text: var(--slide-color-dark-accent-text);
    --fb-slide-toc-number-shadow: rgba(79, 70, 229, 0.4);

    /* Progress Bar Colors */
    --fb-slide-progress-bg: var(--slide-color-dark-border);
    --fb-slide-progress-fill: #fbbf24;
    --fb-slide-progress-shadow: rgba(251, 191, 36, 0.4);

    /* Search Highlight Colors */
    --fb-slide__search-highlight-bg: linear-gradient(90deg, #064e3b, #047857);
    --fb-slide__search-highlight-text: #a7f3d0;
    --fb-slide__search-highlight-border: #10b981;
    --fb-slide__search-highlight-shadow: rgba(16, 185, 129, 0.4);
    --fb-slide__search-match-bg: linear-gradient(135deg, #065f46, #047857);
    --fb-slide__search-match-border: #34d399;
    --fb-slide__search-match-shadow: rgba(52, 211, 153, 0.3);

    /* UI Colors */
    --fb-slide-bg: var(--slide-color-dark-bg);
    --fb-slide-bg-nav: var(--slide-color-dark-bg-nav);
    --fb-slide-bg-sidebar: var(--slide-color-dark-bg-sidebar);
    --fb-slide-gray-1: #0f172a;
    --fb-slide-gray-2: #64748b;
    --fb-slide-gray-3: #94a3b8;
    --fb-slide-gray-4: #cbd5e1;
    --fb-slide-gray-5: #e2e8f0;
    --fb-slide-gray-6: #334155;
    --fb-slide-accent: var(--slide-color-dark-accent);
    --fb-slide-accent-text: var(--slide-color-dark-accent-text);
    --fb-slide-accent-high: #2563eb;
    --fb-slide-accent-low: rgba(59, 130, 246, 0.1);

    /* Compact button colors */
    --fb-compact-btn-bg: #334155;
    --fb-compact-btn-bg-hover: #475569;

    /* Slide Number Indicator */
    --fb-slide-number-bg: #2563eb;
    --fb-slide-number-text: white;
    --fb-slide-number-shadow: rgba(37, 99, 235, 0.4);
    --fb-slide-number-shadow-hover: rgba(37, 99, 235, 0.6);
    --fb-slide-number-border: rgba(255, 255, 255, 0.2);

    /* Thumbnail Badge */
    --fb-slide-thumbnail-badge-bg: #3b82f6;
    --fb-slide-thumbnail-badge-text: white;
    --fb-slide-thumbnail-badge-shadow: rgba(0, 0, 0, 0.3);

    /* Navigation Button Colors */
    --fb-slide-prev-btn-bg: #dc2626;
    --fb-slide-prev-btn-bg-hover: #b91c1c;
    --fb-slide-next-btn-bg: #2563eb;
    --fb-slide-next-btn-bg-hover: #1d4ed8;
    --fb-slide-close-btn-bg: #dc2626;
    --fb-slide-close-btn-bg-hover: #b91c1c;
    --fb-slide-fullscreen-btn-bg: #059669;
    --fb-slide-fullscreen-btn-bg-hover: #047857;
    --fb-slide-btn-text: white;

    /* Quote Colors */
    --fb-slide-quote-accent: #fbbf24;

    /* Error Colors */
    --fb-slide-error-bg: #dc2626;
    --fb-slide-error-text: white;

    /* Laser Pointer */
    --fb-slide-laser-indicator-bg: rgba(255, 107, 53, 0.9);
    --fb-slide-laser-indicator-text: white;

    /* Bookmark Colors */
    --fb-slide-bookmark-btn-bg: rgba(255, 255, 255, 0.1);
    --fb-slide-bookmark-btn-bg-hover: rgba(255, 255, 255, 0.2);
    --fb-slide-bookmark-btn-border: rgba(255, 255, 255, 0.2);
    --fb-slide-bookmark-btn-border-hover: #3b82f6;
    --fb-slide-bookmark-btn-text: rgba(255, 255, 255, 0.8);
    --fb-slide-bookmark-btn-text-hover: #3b82f6;
    --fb-slide-bookmark-btn-bookmarked-bg: #3b82f6;
    --fb-slide-bookmark-btn-bookmarked-bg-hover: #2563eb;
    --fb-slide-bookmark-btn-bookmarked-text: #ffffff;
    --fb-slide-bookmark-toggle-bg: transparent;
    --fb-slide-bookmark-toggle-bg-hover: rgba(255, 255, 255, 0.1);
    --fb-slide-bookmark-toggle-border: rgba(255, 255, 255, 0.2);
    --fb-slide-bookmark-toggle-border-hover: #3b82f6;
    --fb-slide-bookmark-toggle-text: rgba(255, 255, 255, 0.8);
    --fb-slide-bookmark-toggle-text-hover: #3b82f6;
    --fb-slide-bookmark-count-bg: #3b82f6;
    --fb-slide-bookmark-count-text: #ffffff;
    --fb-slide-bookmark-panel-bg: #0f172a;
    --fb-slide-bookmark-panel-border: #374151;
    --fb-slide-bookmark-panel-shadow: rgba(0, 0, 0, 0.3);
    --fb-slide-bookmark-header-bg: #1e293b;
    --fb-slide-bookmark-header-text: #e2e8f0;
    --fb-slide-bookmark-item-bg: #334155;
    --fb-slide-bookmark-item-bg-hover: #1e293b;
    --fb-slide-bookmark-item-border: #374151;
    --fb-slide-bookmark-item-border-hover: #3b82f6;
    --fb-slide-bookmark-item-text: #94a3b8;
    --fb-slide-bookmark-number-text: #3b82f6;
    --fb-slide-bookmark-remove-bg-hover: #7f1d1d;
    --fb-slide-bookmark-remove-text-hover: #dc2626;
  }

  /* Independent Dark Theme Modal Background */
  .fb-slide__theme-independent-dark .fb-slide__modal,
  #slide-viewer-modal.fb-slide__theme-independent-dark .fb-slide__modal {
    background: linear-gradient(135deg, #1e3c72, #2a5298);
  }

  /* =============================================================================
     SPECIALTY THEMES (Dracula, GitHub, Discord, OneDark)
     These remain for the existing theme selector dropdown
     ============================================================================= */

  /* 🧛 Dracula Theme */
  .fb-slide__theme-dracula,
  #slide-viewer-modal.fb-slide__theme-dracula,
  .fb-slide__theme-dracula .fb-slide__container {
    --fb-slide-toc-bg: #44475a;
    --fb-slide-toc-border: #6272a4;
    --fb-slide-toc-text: #50fa7b;
    --fb-slide-toc-hover-bg: #6272a4;
    --fb-slide-toc-hover-border: #ff79c6;
    --fb-slide-toc-hover-shadow: rgba(255, 121, 198, 0.4);
    --fb-slide-toc-active-bg: #ff79c6;
    --fb-slide-toc-active-text: #282a36;
    --fb-slide-toc-active-border: #ff92d0;
    --fb-slide-toc-active-shadow: rgba(255, 121, 198, 0.6);
    --fb-slide-toc-number-bg: #bd93f9;
    --fb-slide-toc-number-text: #282a36;
    --fb-slide-toc-number-shadow: rgba(189, 147, 249, 0.5);
    --fb-slide-text-color: #f8f8f2;
    --fb-slide-heading-color: #50fa7b;
  }

  /* 🐙 GitHub Theme */
  .fb-slide__theme-github,
  #slide-viewer-modal.fb-slide__theme-github,
  .fb-slide__theme-github .fb-slide__container {
    --fb-slide-toc-bg: #21262d;
    --fb-slide-toc-border: #30363d;
    --fb-slide-toc-text: #58a6ff;
    --fb-slide-toc-hover-bg: #30363d;
    --fb-slide-toc-hover-border: #58a6ff;
    --fb-slide-toc-hover-shadow: rgba(88, 166, 255, 0.3);
    --fb-slide-toc-active-bg: #58a6ff;
    --fb-slide-toc-active-text: #0d1117;
    --fb-slide-toc-active-border: #79c0ff;
    --fb-slide-toc-active-shadow: rgba(88, 166, 255, 0.5);
    --fb-slide-toc-number-bg: #3fb950;
    --fb-slide-toc-number-text: #0d1117;
    --fb-slide-toc-number-shadow: rgba(63, 185, 80, 0.4);
    --fb-slide-text-color: #f0f6fc;
    --fb-slide-heading-color: #58a6ff;
  }

  /* 🎮 Discord Theme */
  .fb-slide__theme-discord,
  #slide-viewer-modal.fb-slide__theme-discord,
  .fb-slide__theme-discord .fb-slide__container {
    --fb-slide-toc-bg: #2f3136;
    --fb-slide-toc-border: #40444b;
    --fb-slide-toc-text: #5865f2;
    --fb-slide-toc-hover-bg: #40444b;
    --fb-slide-toc-hover-border: #5865f2;
    --fb-slide-toc-hover-shadow: rgba(88, 101, 242, 0.3);
    --fb-slide-toc-active-bg: #5865f2;
    --fb-slide-toc-active-text: #ffffff;
    --fb-slide-toc-active-border: #4752c4;
    --fb-slide-toc-active-shadow: rgba(88, 101, 242, 0.5);
    --fb-slide-toc-number-bg: #57f287;
    --fb-slide-toc-number-text: #2f3136;
    --fb-slide-toc-number-shadow: rgba(87, 242, 135, 0.4);
    --fb-slide-text-color: #ffffff;
    --fb-slide-heading-color: #5865f2;
  }

  /* ⚛️ One Dark Theme */
  .fb-slide__theme-onedark,
  #slide-viewer-modal.fb-slide__theme-onedark,
  .fb-slide__theme-onedark .fb-slide__container {
    --fb-slide-toc-bg: #2c323c;
    --fb-slide-toc-border: #3e4451;
    --fb-slide-toc-text: #abb2bf;
    --fb-slide-toc-hover-bg: #3e4451;
    --fb-slide-toc-hover-border: #61afef;
    --fb-slide-toc-hover-shadow: rgba(97, 175, 239, 0.3);
    --fb-slide-toc-active-bg: #e5c07b;
    --fb-slide-toc-active-text: #282c34;
    --fb-slide-toc-active-border: #d19a66;
    --fb-slide-toc-active-shadow: rgba(229, 192, 123, 0.4);
    --fb-slide-toc-number-bg: #61afef;
    --fb-slide-toc-number-text: #282c34;
    --fb-slide-toc-number-shadow: rgba(97, 175, 239, 0.4);
    --fb-slide-text-color: #abb2bf;
    --fb-slide-heading-color: #abb2bf;
  }

  /* Theme Selector Styles */
  .fb-slide__theme-selector {
    position: relative;
    display: flex;
    align-items: center;
  }

  .fb-slide__theme-dropdown {
    position: absolute;
    bottom: calc(100% + 0.5rem);
    left: 50%;
    transform: translateX(-50%);
    background: var(--sl-color-bg);
    border: 1px solid var(--sl-color-gray-5);
    border-radius: 0.5rem;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
    z-index: 1000;
    min-width: 180px;
    overflow: hidden;
    transition: all 0.2s ease;
    animation: themeDropdownSlide 0.2s ease-out;
  }

  .fb-slide__theme-dropdown.hidden {
    display: none;
  }

  .fb-slide__theme-item {
    width: 100%;
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.75rem 1rem;
    background: none;
    border: none;
    color: var(--sl-color-text);
    cursor: pointer;
    transition: background-color 0.2s ease;
    font-size: 0.9rem;
    text-align: left;
    border-bottom: 1px solid var(--sl-color-gray-6);
  }

  .fb-slide__theme-item:last-child {
    border-bottom: none;
  }

  .fb-slide__theme-item:hover {
    background: var(--sl-color-gray-6);
  }

  .fb-slide__theme-item:focus {
    outline: none;
    background: var(--sl-color-gray-6);
    box-shadow: inset 0 0 0 2px var(--sl-color-accent);
  }

  .fb-slide__theme-item.active {
    background: var(--sl-color-accent);
    color: var(--sl-color-accent-text);
  }

  .fb-slide__theme-item.active:hover {
    background: var(--sl-color-accent);
  }

  .fb-slide__theme-item.disabled {
    opacity: 0.6;
    cursor: not-allowed;
  }

  .fb-slide__theme-item.disabled:hover {
    background: none;
  }

  .fb-slide__theme-item.disabled.active {
    background: var(--sl-color-accent);
    color: var(--sl-color-accent-text);
    opacity: 1;
    cursor: not-allowed;
  }

  .fb-slide__theme-item svg {
    width: 16px;
    height: 16px;
    flex-shrink: 0;
  }

  .fb-slide__theme-emoji {
    font-size: 16px;
    width: 16px;
    height: 16px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
  }

  .fb-slide__theme-text {
    flex: 1;
    font-weight: 400;
  }

  .theme-selector-btn.active {
    background: var(--sl-color-accent) !important;
    color: var(--sl-color-accent-text) !important;
    transform: translateY(-1px);
    box-shadow: 0 2px 8px var(--fb-slide-thumbnail-badge-shadow);
  }

  /* Theme dropdown animations */
  @keyframes themeDropdownSlide {
    from {
      opacity: 0;
      transform: translateX(-50%) translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateX(-50%) translateY(0);
    }
  }

  /* Theme-specific modal backgrounds */
  .fb-slide__theme-light .fb-slide__modal {
    background: linear-gradient(135deg, #f8fafc, #e2e8f0);
  }

  .fb-slide__theme-independent-dark .fb-slide__modal {
    background: linear-gradient(135deg, #1e3c72, #2a5298);
  }

  .fb-slide__theme-dracula .fb-slide__modal {
    background: linear-gradient(135deg, #282a36, #44475a);
  }

  .fb-slide__theme-github .fb-slide__modal {
    background: linear-gradient(135deg, #0d1117, #21262d);
  }

  .fb-slide__theme-discord .fb-slide__modal {
    background: linear-gradient(135deg, #2f3136, #36393f);
  }
}