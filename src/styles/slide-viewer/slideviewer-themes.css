/* Simplified SlideViewer Theme System with --fb prefix */

@layer fbSlideViewer {
  /* Core theme system - each theme only needs to define these base colors */
  :root {
    /* Base color system - themes override these */
    --fb-primary: #3b82f6;      /* Main accent color */
    --fb-secondary: #64748b;    /* Secondary accent */
    --fb-background: #ffffff;   /* Main background */
    --fb-surface: #f8fafc;      /* Cards, panels */
    --fb-text: #1f2937;         /* Primary text */
    --fb-text-muted: #64748b;   /* Secondary text */
    --fb-border: #e2e8f0;       /* Borders, dividers */
    --fb-success: #10b981;      /* Success states */
    --fb-warning: #f59e0b;      /* Warning states */
    --fb-error: #ef4444;        /* Error states */
    --fb-h1-color: #1f2937; /* H1 heading color */
    --fb-h2-color: #1f2937; /* H2 heading color */
    --fb-h3-color: #1f2937; /* H3 heading color */
    --fb-h4-color: #1f2937; /* H4 heading color */
    --fb-h5-color: #1f2937; /* H5 heading color */
    --fb-h6-color: #1f2937; /* H6 heading color */
  }

  /* Derived variables - automatically calculated from base colors */
  :root {
    /* Derived colors using color-mix (with fallbacks) */
    --fb-primary-hover: color-mix(in srgb, var(--fb-primary) 85%, black);
    --fb-primary-light: color-mix(in srgb, var(--fb-primary) 10%, transparent);
    --fb-surface-hover: color-mix(in srgb, var(--fb-surface) 95%, var(--fb-primary));
    --fb-border-hover: color-mix(in srgb, var(--fb-border) 70%, var(--fb-primary));
    
    /* Fallbacks for older browsers */
    --fb-primary-hover: var(--fb-primary, #2563eb);
    --fb-primary-light: rgba(59, 130, 246, 0.1);
    --fb-surface-hover: var(--fb-surface, #f1f5f9);
    --fb-border-hover: var(--fb-border, #cbd5e1);

    /* Semantic color mappings */
    --fb-toc-bg: var(--fb-surface);
    --fb-toc-text: var(--fb-text);
    --fb-toc-border: var(--fb-border);
    --fb-toc-hover-bg: var(--fb-surface-hover);
    --fb-toc-hover-border: var(--fb-primary);
    --fb-toc-active-bg: var(--fb-warning);
    --fb-toc-active-text: var(--fb-text);
    
    --fb-progress-bg: var(--fb-border);
    --fb-progress-fill: var(--fb-warning);
    
    --fb-btn-primary-bg: var(--fb-primary);
    --fb-btn-primary-text: white;
    --fb-btn-primary-hover: var(--fb-primary-hover);
    --fb-btn-secondary-bg: var(--fb-surface);
    --fb-btn-secondary-text: var(--fb-text);
    --fb-btn-secondary-hover: var(--fb-surface-hover);
    
    --fb-search-highlight-bg: var(--fb-success);
    --fb-search-highlight-text: white;
    
    --fb-bookmark-bg: var(--fb-primary-light);
    --fb-bookmark-border: var(--fb-primary);
    --fb-bookmark-text: var(--fb-primary);
  }

  /* Base slide viewer styles using semantic variables */
  .fb-slide__container,
  .fb-slide__modal {
    background-color: var(--fb-background);
    color: var(--fb-text);
  }

  .fb-slide__toc {
    background-color: var(--fb-toc-bg);
    border-color: var(--fb-toc-border);
    color: var(--fb-toc-text);
  }

  .fb-slide__toc-item:hover {
    background-color: var(--fb-toc-hover-bg);
    border-color: var(--fb-toc-hover-border);
  }

  .fb-slide__toc-item.active {
    background-color: var(--fb-toc-active-bg);
    color: var(--fb-toc-active-text);
  }

  .fb-slide__progress-bar {
    background-color: var(--fb-progress-bg);
  }

  .fb-slide__progress-fill {
    background-color: var(--fb-progress-fill);
  }

  /* Theme definitions - only base colors needed */
  
  /* Default Theme (Dark) */
  .fb-slide__theme-default {
    --fb-primary: #3b82f6;
    --fb-secondary: #94a3b8;
    --fb-background: #0f172a;
    --fb-surface: #1e293b;
    --fb-text: #f9fafb;
    --fb-text-muted: #94a3b8;
    --fb-border: #374151;
    --fb-success: #10b981;
    --fb-warning: #fbbf24;
    --fb-error: #ef4444;
    --fb-h1-color: #ffffff;
    --fb-h2-color: #f9fafb;
    --fb-h3-color: #f3f4f6;
    --fb-h4-color: #e5e7eb;
    --fb-h5-color: #d1d5db;
    --fb-h6-color: #9ca3af;
    
    /* Override hover colors for dark theme - darker instead of brighter */
    --fb-surface-hover: #0f172a; /* Much darker for better contrast */
  }

  /* Default Theme (Light) */
  .fb-slide__theme-default-light {
    --fb-primary: #3b82f6;
    --fb-secondary: #64748b;
    --fb-background: #ffffff;
    --fb-surface: #f8fafc;
    --fb-text: #1f2937;
    --fb-text-muted: #64748b;
    --fb-border: #e2e8f0;
    --fb-success: #10b981;
    --fb-warning: #f59e0b;
    --fb-error: #ef4444;
    --fb-h1-color: #000000;
    --fb-h2-color: #1f2937;
    --fb-h3-color: #374151;
    --fb-h4-color: #4b5563;
    --fb-h5-color: #6b7280;
    --fb-h6-color: #9ca3af;
    
    /* Override hover colors for light theme - darker for better contrast */
    --fb-surface-hover: #e2e8f0;
  }

  /* Dracula Theme */
  .fb-slide__theme-dracula {
    --fb-primary: #ff79c6;
    --fb-secondary: #6272a4;
    --fb-background: #282a36;
    --fb-surface: #44475a;
    --fb-text: #f8f8f2;
    --fb-text-muted: #6272a4;
    --fb-border: #6272a4;
    --fb-success: #50fa7b;
    --fb-warning: #ffb86c;
    --fb-error: #ff5555;
    --fb-h1-color: #b33367;
    --fb-h2-color: #cc417a;
    --fb-h3-color: #e54f8d;
    --fb-h4-color: #ff5da0;
    --fb-h5-color: #ff6bb3;
    --fb-h6-color: #ff79c6;
    
    /* Override hover colors for dark theme - darker instead of brighter */
    --fb-surface-hover: #282a36;
  }

  /* Dracula Light Theme */
  .fb-slide__theme-dracula-light {
    --fb-primary: #bd5eff;
    --fb-secondary: #6272a4;
    --fb-background: #f8f8f2;
    --fb-surface: #ffffff;
    --fb-text: #282a36;
    --fb-text-muted: #6272a4;
    --fb-border: #d0d1d6;
    --fb-success: #42b883;
    --fb-warning: #f76707;
    --fb-error: #dc2626;
    --fb-h1-color: #5b21b6;
    --fb-h2-color: #6d28d9;
    --fb-h3-color: #7c3aed;
    --fb-h4-color: #9333ea;
    --fb-h5-color: #a855f7;
    --fb-h6-color: #bd5eff;
    
    /* Override hover colors for light theme - darker for better contrast */
    --fb-surface-hover: #e8e8e3;
  }

  /* GitHub Theme */
  .fb-slide__theme-github {
    --fb-primary: #58a6ff;
    --fb-secondary: #7d8590;
    --fb-background: #0d1117;
    --fb-surface: #21262d;
    --fb-text: #f0f6fc;
    --fb-text-muted: #7d8590;
    --fb-border: #30363d;
    --fb-success: #3fb950;
    --fb-warning: #f0883e;
    --fb-error: #da3633;
    --fb-h1-color: #0550ae;
    --fb-h2-color: #0969da;
    --fb-h3-color: #1088ff;
    --fb-h4-color: #2892ff;
    --fb-h5-color: #409cff;
    --fb-h6-color: #58a6ff;
    
    /* Override hover colors for dark theme - darker instead of brighter */
    --fb-surface-hover: #161b22;
  }

  /* GitHub Light Theme */
  .fb-slide__theme-github-light {
    --fb-primary: #0969da;
    --fb-secondary: #656d76;
    --fb-background: #ffffff;
    --fb-surface: #f6f8fa;
    --fb-text: #1f2328;
    --fb-text-muted: #656d76;
    --fb-border: #d1d9e0;
    --fb-success: #1a7f37;
    --fb-warning: #bf8700;
    --fb-error: #d1242f;
    --fb-h1-color: #043c8a;
    --fb-h2-color: #05459a;
    --fb-h3-color: #064eaa;
    --fb-h4-color: #0757ba;
    --fb-h5-color: #0860ca;
    --fb-h6-color: #0969da;
    
    /* Override hover colors for light theme - darker for better contrast */
    --fb-surface-hover: #d1d9e0;
  }

  /* Discord Theme */
  .fb-slide__theme-discord {
    --fb-primary: #5865f2;
    --fb-secondary: #72767d;
    --fb-background: #2f3136;
    --fb-surface: #36393f;
    --fb-text: #ffffff;
    --fb-text-muted: #72767d;
    --fb-border: #40444b;
    --fb-success: #57f287;
    --fb-warning: #fee75c;
    --fb-error: #ed4245;
    --fb-h1-color: #0f1284;
    --fb-h2-color: #1a1e9a;
    --fb-h3-color: #252db0;
    --fb-h4-color: #3640c6;
    --fb-h5-color: #4752dc;
    --fb-h6-color: #5865f2;
    
    /* Override hover colors for dark theme - darker instead of brighter */
    --fb-surface-hover: #2f3136;
  }

  /* Discord Light Theme */
  .fb-slide__theme-discord-light {
    --fb-primary: #5865f2;
    --fb-secondary: #5c6f7f;
    --fb-background: #ffffff;
    --fb-surface: #f2f3f5;
    --fb-text: #2e3338;
    --fb-text-muted: #5c6f7f;
    --fb-border: #e3e5e8;
    --fb-success: #23a559;
    --fb-warning: #f0b232;
    --fb-error: #d83c3e;
    --fb-h1-color: #0f1284;
    --fb-h2-color: #1a1e9a;
    --fb-h3-color: #252db0;
    --fb-h4-color: #3640c6;
    --fb-h5-color: #4752dc;
    --fb-h6-color: #5865f2;
    
    /* Override hover colors for light theme - darker for better contrast */
    --fb-surface-hover: #e3e5e8;
  }

  /* One Dark Theme */
  .fb-slide__theme-onedark {
    --fb-primary: #61afef;
    --fb-secondary: #5c6370;
    --fb-background: #282c34;
    --fb-surface: #2c323c;
    --fb-text: #abb2bf;
    --fb-text-muted: #5c6370;
    --fb-border: #3e4451;
    --fb-success: #98c379;
    --fb-warning: #e5c07b;
    --fb-error: #e06c75;
    --fb-h1-color: #027dd1;
    --fb-h2-color: #1587d7;
    --fb-h3-color: #2891dd;
    --fb-h4-color: #3b9be3;
    --fb-h5-color: #4ea5e9;
    --fb-h6-color: #61afef;
    
    /* Override hover colors for dark theme - darker instead of brighter */
    --fb-surface-hover: #21252b;
  }

  /* One Dark Light Theme (One Light) */
  .fb-slide__theme-onedark-light {
    --fb-primary: #4078f2;
    --fb-secondary: #6b7394;
    --fb-background: #fafafa;
    --fb-surface: #ffffff;
    --fb-text: #383a42;
    --fb-text-muted: #6b7394;
    --fb-border: #e5e5e6;
    --fb-success: #50a14f;
    --fb-warning: #c18401;
    --fb-error: #e45649;
    --fb-h1-color: #004684;
    --fb-h2-color: #08509a;
    --fb-h3-color: #165ab0;
    --fb-h4-color: #2464c6;
    --fb-h5-color: #326edc;
    --fb-h6-color: #4078f2;
    
    /* Override hover colors for light theme - darker for better contrast */
    --fb-surface-hover: #e5e5e6;
  }

  /* Ocean Theme (Dark) */
  .fb-slide__theme-ocean {
    --fb-primary: #00d4ff;
    --fb-secondary: #64b5f6;
    --fb-background: #0a1929;
    --fb-surface: #132f4c;
    --fb-text: #ffffff;
    --fb-text-muted: #b3d9ff;
    --fb-border: #1e3a5f;
    --fb-success: #4cceac;
    --fb-warning: #ffa726;
    --fb-error: #f44336;
    --fb-h1-color: #0084af;
    --fb-h2-color: #0094bf;
    --fb-h3-color: #00a4cf;
    --fb-h4-color: #00b4df;
    --fb-h5-color: #00c4ef;
    --fb-h6-color: #00d4ff;
    
    /* Override hover colors for dark theme - darker instead of brighter */
    --fb-surface-hover: #0a1929;
  }

  /* Ocean Light Theme */
  .fb-slide__theme-ocean-light {
    --fb-primary: #0288d1;
    --fb-secondary: #546e7a;
    --fb-background: #ffffff;
    --fb-surface: #f8fcff;
    --fb-text: #0d47a1;
    --fb-text-muted: #546e7a;
    --fb-border: #bbdefb;
    --fb-success: #00695c;
    --fb-warning: #ef6c00;
    --fb-error: #c62828;
    --fb-h1-color: #01336d;
    --fb-h2-color: #014481;
    --fb-h3-color: #025595;
    --fb-h4-color: #0266a9;
    --fb-h5-color: #0277bd;
    --fb-h6-color: #0288d1;
    
    /* Override hover colors for light theme - darker for better contrast */
    --fb-surface-hover: #bbdefb;
  }

  /* Component-specific overrides when needed */
  .fb-slide__theme-dracula {
    --fb-toc-active-text: #282a36; /* Dark text on pink background */
  }

  .fb-slide__theme-github {
    --fb-btn-primary-text: #0d1117; /* Dark text on blue background */
  }

  /* Utility classes for common patterns */
  .fb-theme-surface {
    background-color: var(--fb-surface);
    border: 1px solid var(--fb-border);
  }

  .fb-theme-button-primary {
    background-color: var(--fb-btn-primary-bg);
    color: var(--fb-btn-primary-text);
    border: none;
    transition: background-color 0.2s ease;
  }

  .fb-theme-button-primary:hover {
    background-color: var(--fb-btn-primary-hover);
  }

  .fb-theme-button-secondary {
    background-color: var(--fb-btn-secondary-bg);
    color: var(--fb-btn-secondary-text);
    border: 1px solid var(--fb-border);
  }

  .fb-theme-button-secondary:hover {
    background-color: var(--fb-btn-secondary-hover);
    border-color: var(--fb-border-hover);
  }
}

/* Advanced: Auto-generate hover states using CSS functions (modern browsers) */
@supports (color: color-mix(in srgb, red, blue)) {
  :root {
    --fb-primary-hover: color-mix(in srgb, var(--fb-primary) 85%, black);
    --fb-surface-hover: color-mix(in srgb, var(--fb-surface) 95%, var(--fb-primary));
    --fb-border-hover: color-mix(in srgb, var(--fb-border) 70%, var(--fb-primary));
  }
}

/* Responsive theme adjustments */
@media (max-width: 768px) {
  :root {
    --fb-surface: color-mix(in srgb, var(--fb-surface) 98%, var(--fb-background));
  }
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  :root {
    --fb-border: color-mix(in srgb, var(--fb-text) 30%, transparent);
    --fb-toc-hover-border: var(--fb-text);
  }
}